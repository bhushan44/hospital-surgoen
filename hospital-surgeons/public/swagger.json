{
  "openapi": "3.0.0",
  "info": {
    "title": "Hospital Surgeons API",
    "version": "1.0.0",
    "description": "API documentation for Hospital Surgeons application",
    "contact": {
      "name": "API Support",
      "email": "admin@example.com"
    }
  },
  "servers": [
    {
      "url": "https://hospital-surgoen.onrender.com",
      "description": "API Server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter JWT token"
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Users",
      "description": "User management endpoints"
    },
    {
      "name": "Doctors",
      "description": "Doctor management endpoints"
    },
    {
      "name": "Hospitals",
      "description": "Hospital management endpoints"
    },
    {
      "name": "Specialties",
      "description": "Specialty management endpoints"
    },
    {
      "name": "Bookings",
      "description": "Booking management endpoints"
    },
    {
      "name": "Payments",
      "description": "Payment management endpoints"
    },
    {
      "name": "Reviews",
      "description": "Review management endpoints"
    },
    {
      "name": "Notifications",
      "description": "Notification management endpoints"
    },
    {
      "name": "Support",
      "description": "Support ticket endpoints"
    },
    {
      "name": "Analytics",
      "description": "Analytics endpoints"
    },
    {
      "name": "Subscriptions",
      "description": "Subscription management endpoints"
    },
    {
      "name": "Admin",
      "description": "Admin management endpoints"
    },
    {
      "name": "Files",
      "description": "File management endpoints"
    },
    {
      "name": "Documentation",
      "description": "API documentation endpoints"
    }
  ],
  "paths": {
    "/api/admin/analytics/overview": {
      "get": {
        "summary": "Get analytics overview (Admin only)",
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "months",
            "schema": {
              "type": "integer",
              "default": 12
            },
            "description": "Number of months to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Analytics overview retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalUsers": {
                          "type": "integer"
                        },
                        "newUsers": {
                          "type": "integer"
                        },
                        "totalAssignments": {
                          "type": "integer"
                        },
                        "newAssignments": {
                          "type": "integer"
                        },
                        "activeSubscriptions": {
                          "type": "integer"
                        },
                        "totalRevenue": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/admin/assignments": {
      "get": {
        "summary": "Get all assignments with filters (Admin only)",
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "accepted",
                "declined",
                "completed",
                "cancelled"
              ]
            }
          },
          {
            "in": "query",
            "name": "priority",
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent",
                "emergency"
              ]
            }
          },
          {
            "in": "query",
            "name": "doctorId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "hospitalId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "default": "requestedAt"
            }
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Assignments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "pagination": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/admin/dashboard/stats": {
      "get": {
        "summary": "Get admin dashboard statistics (Admin only)",
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "activeDoctors": {
                          "type": "integer"
                        },
                        "activeHospitals": {
                          "type": "integer"
                        },
                        "totalAssignments": {
                          "type": "integer"
                        },
                        "activeSubscriptions": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/admin/users": {
      "get": {
        "summary": "Get all users with filters (Admin only)",
        "tags": [
          "Admin"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "in": "query",
            "name": "role",
            "schema": {
              "type": "string",
              "enum": [
                "admin",
                "doctor",
                "hospital"
              ]
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "suspended"
              ]
            }
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "default": "createdAt"
            }
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Users retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "pagination": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/analytics/events": {
      "get": {
        "summary": "Get analytics events (Admin only)",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "userId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "eventType",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "eventName",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of analytics events"
          }
        }
      },
      "post": {
        "summary": "Create an analytics event (Public for tracking)",
        "tags": [
          "Analytics"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventType",
                  "eventName"
                ],
                "properties": {
                  "userId": {
                    "type": "string"
                  },
                  "eventType": {
                    "type": "string"
                  },
                  "eventName": {
                    "type": "string"
                  },
                  "properties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Analytics event created successfully"
          }
        }
      }
    },
    "/api/assignments/{id}/payment": {
      "get": {
        "summary": "Get payment details for an assignment",
        "tags": [
          "Assignments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Assignment ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Payment details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "assignmentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "hospitalId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "doctorId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "consultationFee": {
                          "type": "string",
                          "format": "numeric"
                        },
                        "platformCommission": {
                          "type": "string",
                          "format": "numeric"
                        },
                        "doctorPayout": {
                          "type": "string",
                          "format": "numeric"
                        },
                        "paymentStatus": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "processing",
                            "completed",
                            "failed"
                          ]
                        },
                        "paidToDoctorAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Payment not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "summary": "Mark payment as completed",
        "tags": [
          "Assignments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Assignment ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Payment marked as completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Only hospital and admin can mark payment as completed"
          },
          "404": {
            "description": "Assignment or payment not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/bookings/{id}": {
      "get": {
        "summary": "Get booking/assignment by ID",
        "tags": [
          "Bookings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Booking/Assignment ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Booking details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Booking not found"
          }
        }
      },
      "patch": {
        "summary": "Update booking/assignment by ID",
        "tags": [
          "Bookings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Booking/Assignment ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "confirmed",
                      "completed",
                      "cancelled",
                      "no_show"
                    ]
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high"
                    ]
                  },
                  "treatmentNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Booking updated successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Booking not found"
          }
        }
      },
      "delete": {
        "summary": "Delete booking/assignment by ID",
        "tags": [
          "Bookings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Booking/Assignment ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Booking deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/bookings": {
      "get": {
        "summary": "Get all bookings",
        "tags": [
          "Bookings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "hospitalId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "doctorId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "confirmed",
                "completed",
                "cancelled",
                "no_show"
              ]
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of bookings"
          }
        }
      },
      "post": {
        "summary": "Create a new booking (Hospital/Admin only)",
        "tags": [
          "Bookings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "hospitalId",
                  "doctorId",
                  "specialtyId",
                  "bookingDate",
                  "startTime",
                  "endTime",
                  "doctorFee",
                  "commissionAmount",
                  "totalAmount"
                ],
                "properties": {
                  "hospitalId": {
                    "type": "string"
                  },
                  "doctorId": {
                    "type": "string"
                  },
                  "specialtyId": {
                    "type": "string"
                  },
                  "bookingDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "startTime": {
                    "type": "string"
                  },
                  "endTime": {
                    "type": "string"
                  },
                  "doctorFee": {
                    "type": "number"
                  },
                  "commissionAmount": {
                    "type": "number"
                  },
                  "totalAmount": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Booking created successfully"
          }
        }
      }
    },
    "/api/docs": {
      "get": {
        "summary": "Get Swagger API documentation",
        "tags": [
          "Documentation"
        ],
        "responses": {
          "200": {
            "description": "Swagger JSON specification"
          }
        }
      }
    },
    "/api/doctors/{id}/assignment-usage": {
      "get": {
        "summary": "Get assignment usage statistics for a doctor",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignment usage retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "used": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor not found"
          }
        }
      }
    },
    "/api/doctors/{id}/assignments": {
      "get": {
        "summary": "Get all assignments for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "confirmed",
                "completed",
                "cancelled",
                "all"
              ]
            },
            "description": "Filter by assignment status"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search by patient name, hospital name, or condition"
          },
          {
            "in": "query",
            "name": "todayOnly",
            "schema": {
              "type": "boolean"
            },
            "description": "Filter to only today's assignments"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "patient": {
                            "type": "string"
                          },
                          "condition": {
                            "type": "string"
                          },
                          "hospital": {
                            "type": "string"
                          },
                          "hospitalAddress": {
                            "type": "string",
                            "nullable": true,
                            "description": "Full address of the hospital"
                          },
                          "date": {
                            "type": "string",
                            "format": "date"
                          },
                          "time": {
                            "type": "string"
                          },
                          "endTime": {
                            "type": "string",
                            "nullable": true
                          },
                          "status": {
                            "type": "string"
                          },
                          "priority": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "expiresIn": {
                            "type": "string",
                            "nullable": true
                          },
                          "fee": {
                            "type": "number"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/availability": {
      "get": {
        "summary": "Get all availability slots for a doctor",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Availability slots retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "doctorId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "slotDate": {
                            "type": "string",
                            "format": "date"
                          },
                          "startTime": {
                            "type": "string",
                            "format": "time"
                          },
                          "endTime": {
                            "type": "string",
                            "format": "time"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "available",
                              "booked",
                              "blocked"
                            ]
                          },
                          "isManual": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      },
      "post": {
        "summary": "Create a new availability slot for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "slotDate",
                  "startTime",
                  "endTime"
                ],
                "properties": {
                  "slotDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "startTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "endTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "templateId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "available",
                      "booked",
                      "blocked"
                    ],
                    "default": "available"
                  },
                  "isManual": {
                    "type": "boolean",
                    "default": false
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Availability slot created successfully"
          },
          "400": {
            "description": "Bad request (overlapping slot or invalid data)"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/availability/templates/{templateId}": {
      "patch": {
        "summary": "Update an availability template",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "path",
            "name": "templateId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Template ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "templateName": {
                    "type": "string"
                  },
                  "startTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "endTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "recurrencePattern": {
                    "type": "string",
                    "enum": [
                      "daily",
                      "weekly",
                      "monthly",
                      "custom"
                    ]
                  },
                  "recurrenceDays": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "validFrom": {
                    "type": "string",
                    "format": "date"
                  },
                  "validUntil": {
                    "type": "string",
                    "format": "date",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template updated successfully"
          },
          "400": {
            "description": "Bad request (overlapping template or invalid data)"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Template not found"
          }
        }
      },
      "delete": {
        "summary": "Delete an availability template",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "path",
            "name": "templateId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Template ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Template deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Template not found"
          }
        }
      }
    },
    "/api/doctors/{id}/availability/templates/generate": {
      "post": {
        "summary": "Generate availability slots from templates for a doctor",
        "description": "Can generate from all templates or a specific template. Used by both cron jobs (no auth) and manual triggers (with auth).",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "header",
            "name": "authorization",
            "schema": {
              "type": "string"
            },
            "description": "Optional - Bearer token for authenticated requests. For cron jobs, use x-cron-secret header instead."
          },
          {
            "in": "header",
            "name": "x-cron-secret",
            "schema": {
              "type": "string"
            },
            "description": "Optional - Cron secret for unauthenticated cron job calls"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "templateId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Optional - Generate slots only for this specific template. If not provided, generates for all templates."
                  },
                  "startDate": {
                    "type": "string",
                    "format": "date",
                    "description": "Optional - Start date for slot generation (YYYY-MM-DD). If not provided, uses today."
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date",
                    "description": "Optional - End date for slot generation (YYYY-MM-DD). If not provided, calculates from days."
                  },
                  "days": {
                    "type": "number",
                    "default": 7,
                    "description": "Optional - Number of days to generate slots for (default: 7). Only used if startDate/endDate not provided."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Availability slots generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "description": "Summary of generated slots"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication"
          },
          "500": {
            "description": "Failed to generate slots"
          }
        }
      }
    },
    "/api/doctors/{id}/availability/templates": {
      "get": {
        "summary": "Get all availability templates for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Templates retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "doctorId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "templateName": {
                            "type": "string"
                          },
                          "startTime": {
                            "type": "string",
                            "format": "time"
                          },
                          "endTime": {
                            "type": "string",
                            "format": "time"
                          },
                          "recurrencePattern": {
                            "type": "string",
                            "enum": [
                              "daily",
                              "weekly",
                              "monthly",
                              "custom"
                            ]
                          },
                          "recurrenceDays": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "validFrom": {
                            "type": "string",
                            "format": "date"
                          },
                          "validUntil": {
                            "type": "string",
                            "format": "date",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      },
      "post": {
        "summary": "Create a new availability template for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "templateName",
                  "startTime",
                  "endTime",
                  "recurrencePattern",
                  "validFrom"
                ],
                "properties": {
                  "templateName": {
                    "type": "string"
                  },
                  "startTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "endTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "recurrencePattern": {
                    "type": "string",
                    "enum": [
                      "daily",
                      "weekly",
                      "monthly",
                      "custom"
                    ]
                  },
                  "recurrenceDays": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Required for weekly pattern (e.g., [\"mon\", \"wed\", \"fri\"])"
                  },
                  "validFrom": {
                    "type": "string",
                    "format": "date"
                  },
                  "validUntil": {
                    "type": "string",
                    "format": "date",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created successfully"
          },
          "400": {
            "description": "Bad request (overlapping template or invalid data)"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/credentials": {
      "get": {
        "summary": "Get all credentials for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Credentials retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "doctorId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "fileId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "credentialType": {
                            "type": "string",
                            "enum": [
                              "degree",
                              "certificate",
                              "license",
                              "other"
                            ]
                          },
                          "title": {
                            "type": "string"
                          },
                          "institution": {
                            "type": "string",
                            "nullable": true
                          },
                          "verificationStatus": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "verified",
                              "rejected"
                            ]
                          },
                          "uploadedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "file": {
                            "type": "object",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Doctor not found"
          }
        }
      },
      "post": {
        "summary": "Upload a new credential for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "fileId",
                  "credentialType",
                  "title"
                ],
                "properties": {
                  "fileId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID of the uploaded file"
                  },
                  "credentialType": {
                    "type": "string",
                    "enum": [
                      "degree",
                      "certificate",
                      "license",
                      "other"
                    ]
                  },
                  "title": {
                    "type": "string",
                    "description": "Title of the credential"
                  },
                  "institution": {
                    "type": "string",
                    "description": "Institution that issued the credential"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Credential uploaded successfully"
          },
          "400": {
            "description": "Bad request (missing required fields or invalid credential type)"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Doctor not found"
          }
        }
      }
    },
    "/api/doctors/{id}/credentials/upload": {
      "post": {
        "summary": "Upload credential file and create credential record in one call",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file",
                  "credentialType",
                  "title"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "credentialType": {
                    "type": "string",
                    "enum": [
                      "degree",
                      "certificate",
                      "license",
                      "other"
                    ]
                  },
                  "title": {
                    "type": "string"
                  },
                  "institution": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Credential uploaded and created successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/payments": {
      "get": {
        "summary": "Get payments for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Page number"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Items per page"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "processing",
                "completed",
                "failed"
              ]
            },
            "description": "Filter by payment status"
          }
        ],
        "responses": {
          "200": {
            "description": "Payments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "payments": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "assignmentId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "consultationFee": {
                                "type": "number"
                              },
                              "platformCommission": {
                                "type": "number"
                              },
                              "doctorPayout": {
                                "type": "number"
                              },
                              "paymentStatus": {
                                "type": "string",
                                "enum": [
                                  "pending",
                                  "processing",
                                  "completed",
                                  "failed"
                                ]
                              },
                              "paidToDoctorAt": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "assignment": {
                                "type": "object",
                                "properties": {
                                  "completedAt": {
                                    "type": "string",
                                    "format": "date-time",
                                    "nullable": true
                                  },
                                  "status": {
                                    "type": "string"
                                  }
                                }
                              },
                              "hospital": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                }
                              },
                              "patient": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "name": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "integer"
                            },
                            "limit": {
                              "type": "integer"
                            },
                            "total": {
                              "type": "integer"
                            },
                            "totalPages": {
                              "type": "integer"
                            },
                            "hasNextPage": {
                              "type": "boolean"
                            },
                            "hasPrevPage": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Doctor can only view their own payments"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/doctors/{id}/photos/{photoId}": {
      "patch": {
        "summary": "Set a photo as primary profile photo",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "path",
            "name": "photoId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Photo ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "isPrimary"
                ],
                "properties": {
                  "isPrimary": {
                    "type": "boolean",
                    "description": "Set to true to make this the primary photo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Photo updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete a profile photo",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "path",
            "name": "photoId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Photo ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Photo deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Photo not found"
          }
        }
      }
    },
    "/api/doctors/{id}/photos": {
      "get": {
        "summary": "Get all profile photos for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Profile photos retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "doctorId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "fileId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "isPrimary": {
                            "type": "boolean"
                          },
                          "uploadedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "file": {
                            "type": "object",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "post": {
        "summary": "Upload a new profile photo for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "fileId"
                ],
                "properties": {
                  "fileId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID of the uploaded file"
                  },
                  "isPrimary": {
                    "type": "boolean",
                    "default": false,
                    "description": "Set as primary profile photo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Photo uploaded successfully"
          },
          "400": {
            "description": "Bad request (missing fileId)"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/profile-photo/upload": {
      "post": {
        "summary": "Upload profile photo and update doctor profile in one call",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile photo uploaded and updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}": {
      "get": {
        "summary": "Get doctor by ID",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor not found"
          }
        }
      },
      "patch": {
        "summary": "Update doctor by ID",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": {
                    "type": "string"
                  },
                  "lastName": {
                    "type": "string"
                  },
                  "medicalLicenseNumber": {
                    "type": "string"
                  },
                  "yearsOfExperience": {
                    "type": "number"
                  },
                  "bio": {
                    "type": "string"
                  },
                  "profilePhotoId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Doctor updated successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Doctor not found"
          }
        }
      },
      "delete": {
        "summary": "Delete doctor by ID (Admin only)",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/specialties/{specialtyId}": {
      "delete": {
        "summary": "Remove a specialty from a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          },
          {
            "in": "path",
            "name": "specialtyId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Specialty ID to remove"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty removed successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Specialty not found"
          }
        }
      }
    },
    "/api/doctors/{id}/specialties": {
      "get": {
        "summary": "Get all specialties for a doctor",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialties retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "doctorSpecialty": {
                            "type": "object"
                          },
                          "specialty": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      },
      "post": {
        "summary": "Add a specialty to a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "specialtyId"
                ],
                "properties": {
                  "specialtyId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "isPrimary": {
                    "type": "boolean",
                    "default": false
                  },
                  "yearsOfExperience": {
                    "type": "integer",
                    "description": "Years of experience in this specialty"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Specialty added successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/{id}/stats": {
      "get": {
        "summary": "Get statistics for a doctor",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalBookings": {
                          "type": "number",
                          "description": "Total completed assignments"
                        },
                        "averageRating": {
                          "type": "number",
                          "description": "Average rating (0-5)"
                        },
                        "totalRatings": {
                          "type": "number",
                          "description": "Total number of ratings"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "404": {
            "description": "Doctor not found"
          }
        }
      }
    },
    "/api/doctors/{id}/unavailability": {
      "get": {
        "summary": "Get all leave/unavailability records for a doctor",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Unavailability records retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "doctorId": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "startDate": {
                            "type": "string",
                            "format": "date"
                          },
                          "endDate": {
                            "type": "string",
                            "format": "date"
                          },
                          "leaveType": {
                            "type": "string",
                            "enum": [
                              "sick",
                              "vacation",
                              "personal",
                              "emergency",
                              "other"
                            ]
                          },
                          "reason": {
                            "type": "string",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      },
      "post": {
        "summary": "Create a new leave/unavailability record for a doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "startDate",
                  "endDate"
                ],
                "properties": {
                  "startDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "leaveType": {
                    "type": "string",
                    "enum": [
                      "sick",
                      "vacation",
                      "personal",
                      "emergency",
                      "other"
                    ],
                    "default": "other"
                  },
                  "reason": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Leave record created successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/doctors/availability/{availabilityId}": {
      "patch": {
        "summary": "Update an availability slot",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "availabilityId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Availability slot ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "slotDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "startTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "endTime": {
                    "type": "string",
                    "format": "time"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "available",
                      "booked",
                      "blocked"
                    ]
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Availability slot updated successfully"
          },
          "400": {
            "description": "Bad request (overlapping slot or invalid data)"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete an availability slot",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "availabilityId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Availability slot ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Availability slot deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Availability slot not found"
          }
        }
      }
    },
    "/api/doctors/dashboard": {
      "get": {
        "summary": "Get doctor dashboard statistics and overview",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalAssignments": {
                          "type": "number"
                        },
                        "pendingAssignments": {
                          "type": "number"
                        },
                        "completedAssignments": {
                          "type": "number"
                        },
                        "averageRating": {
                          "type": "number"
                        },
                        "totalRatings": {
                          "type": "number"
                        },
                        "totalEarnings": {
                          "type": "number"
                        },
                        "thisMonthEarnings": {
                          "type": "number"
                        },
                        "thisMonthAssignments": {
                          "type": "number"
                        },
                        "upcomingSlots": {
                          "type": "number"
                        },
                        "profileCompletion": {
                          "type": "number",
                          "description": "Profile completion percentage (0-100)"
                        },
                        "credentials": {
                          "type": "object",
                          "properties": {
                            "verified": {
                              "type": "number"
                            },
                            "pending": {
                              "type": "number"
                            },
                            "rejected": {
                              "type": "number"
                            }
                          }
                        },
                        "activeAffiliations": {
                          "type": "number"
                        },
                        "licenseVerificationStatus": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "verified",
                            "rejected"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor profile not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/doctors/earnings": {
      "get": {
        "summary": "Get doctor earnings and payment statistics",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Earnings data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalEarnings": {
                          "type": "number",
                          "description": "Total earnings from all completed payments"
                        },
                        "thisMonthEarnings": {
                          "type": "number",
                          "description": "Earnings from the current month"
                        },
                        "thisMonthAssignments": {
                          "type": "number",
                          "description": "Number of assignments completed this month"
                        },
                        "pendingEarnings": {
                          "type": "number",
                          "description": "Total earnings pending payment"
                        },
                        "currency": {
                          "type": "string",
                          "default": "USD"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor profile not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/doctors/pending-assignments": {
      "get": {
        "summary": "Get pending assignment requests for the authenticated doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Maximum number of assignments to return"
          },
          {
            "in": "query",
            "name": "priority",
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "emergency"
              ]
            },
            "description": "Filter by priority level"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending assignments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "hospitalName": {
                            "type": "string"
                          },
                          "patientName": {
                            "type": "string"
                          },
                          "patientAge": {
                            "type": "integer",
                            "nullable": true
                          },
                          "condition": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "priority": {
                            "type": "string"
                          },
                          "requestedAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "expiresAt": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true
                          },
                          "expiresIn": {
                            "type": "string",
                            "nullable": true,
                            "description": "Human-readable time until expiry (e.g., \"2h 30m\")"
                          },
                          "consultationFee": {
                            "type": "number",
                            "nullable": true
                          }
                        }
                      }
                    },
                    "count": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor profile not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/doctors/profile": {
      "get": {
        "summary": "Get current doctor profile with subscription plan details",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor profile retrieved successfully with current plan details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "description": "Doctor profile data"
                    },
                    "currentPlan": {
                      "type": "object",
                      "nullable": true,
                      "description": "Current active subscription plan details",
                      "properties": {
                        "subscription": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "startDate": {
                              "type": "string"
                            },
                            "endDate": {
                              "type": "string"
                            },
                            "autoRenew": {
                              "type": "boolean"
                            },
                            "billingCycle": {
                              "type": "string"
                            }
                          }
                        },
                        "plan": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "tier": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string"
                            },
                            "doctorFeatures": {
                              "type": "object",
                              "nullable": true
                            }
                          }
                        },
                        "pricing": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "billingCycle": {
                              "type": "string"
                            },
                            "billingPeriodMonths": {
                              "type": "number"
                            },
                            "price": {
                              "type": "number"
                            },
                            "currency": {
                              "type": "string"
                            },
                            "setupFee": {
                              "type": "number"
                            },
                            "discountPercentage": {
                              "type": "number"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor profile not found"
          }
        }
      },
      "post": {
        "summary": "Create doctor profile for authenticated user",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "medicalLicenseNumber"
                ],
                "properties": {
                  "medicalLicenseNumber": {
                    "type": "string"
                  },
                  "yearsOfExperience": {
                    "type": "number"
                  },
                  "bio": {
                    "type": "string"
                  },
                  "profilePhotoId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "primaryLocation": {
                    "type": "string",
                    "description": "Free-text primary location / city for the doctor"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Doctor profile created successfully"
          },
          "400": {
            "description": "Bad request or profile already exists"
          }
        }
      }
    },
    "/api/doctors/recent-activity": {
      "get": {
        "summary": "Get recent activity for the authenticated doctor",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Maximum number of activities to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Recent activity retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": [
                              "assignment_completed",
                              "credential_verified"
                            ]
                          },
                          "icon": {
                            "type": "string"
                          },
                          "text": {
                            "type": "string"
                          },
                          "time": {
                            "type": "string",
                            "description": "Human-readable time ago (e.g., \"2 hours ago\")"
                          },
                          "timestamp": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor profile not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/doctors/register": {
      "post": {
        "summary": "Complete doctor registration in a single API call",
        "description": "Creates user account, doctor profile, and doctor specialties in one atomic transaction",
        "tags": [
          "Doctors"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "phone",
                  "firstName",
                  "lastName",
                  "medicalLicenseNumber",
                  "yearsOfExperience",
                  "specialties"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "doctor@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "example": "SecurePassword123!"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1234567890"
                  },
                  "firstName": {
                    "type": "string",
                    "example": "John"
                  },
                  "lastName": {
                    "type": "string",
                    "example": "Smith"
                  },
                  "medicalLicenseNumber": {
                    "type": "string",
                    "example": "MD-12345"
                  },
                  "yearsOfExperience": {
                    "type": "integer",
                    "minimum": 0,
                    "example": 5
                  },
                  "bio": {
                    "type": "string",
                    "example": "Experienced cardiologist..."
                  },
                  "profilePhotoId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Optional file ID for profile photo"
                  },
                  "fullAddress": {
                    "type": "string",
                    "description": "Optional. Full address with building/area name for better geocoding accuracy",
                    "example": "123 Medical Center, Building A, Area"
                  },
                  "city": {
                    "type": "string",
                    "description": "Optional. City name",
                    "example": "Mumbai"
                  },
                  "state": {
                    "type": "string",
                    "description": "Optional. State/province name",
                    "example": "Maharashtra"
                  },
                  "pincode": {
                    "type": "string",
                    "description": "Optional. Postal/ZIP code",
                    "example": "400001"
                  },
                  "latitude": {
                    "type": "number",
                    "format": "float",
                    "description": "Optional. Latitude coordinate. If not provided, will be calculated via geocoding from address fields",
                    "example": 19.076
                  },
                  "longitude": {
                    "type": "number",
                    "format": "float",
                    "description": "Optional. Longitude coordinate. If not provided, will be calculated via geocoding from address fields",
                    "example": 72.8777
                  },
                  "specialties": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "specialtyId"
                      ],
                      "properties": {
                        "specialtyId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "isPrimary": {
                          "type": "boolean",
                          "default": false
                        },
                        "yearsOfExperience": {
                          "type": "integer",
                          "minimum": 0
                        }
                      }
                    }
                  },
                  "device": {
                    "type": "object",
                    "properties": {
                      "device_token": {
                        "type": "string"
                      },
                      "device_type": {
                        "type": "string",
                        "enum": [
                          "ios",
                          "android",
                          "web"
                        ]
                      },
                      "app_version": {
                        "type": "string"
                      },
                      "os_version": {
                        "type": "string"
                      },
                      "is_active": {
                        "type": "boolean"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Doctor registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Doctor registered successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object"
                        },
                        "doctor": {
                          "type": "object"
                        },
                        "specialties": {
                          "type": "array"
                        },
                        "accessToken": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - validation error or duplicate email/license"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/doctors": {
      "get": {
        "summary": "Get all doctors with filters",
        "tags": [
          "Doctors"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "specialtyId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "city",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "minRating",
            "schema": {
              "type": "number"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of doctors"
          }
        }
      },
      "post": {
        "summary": "Create a new doctor",
        "tags": [
          "Doctors"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "phone",
                  "password",
                  "name"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Doctor created successfully"
          }
        }
      }
    },
    "/api/doctors/unavailability/{unavailabilityId}": {
      "patch": {
        "summary": "Update a leave/unavailability record",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "unavailabilityId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Unavailability record ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "startDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "leaveType": {
                    "type": "string",
                    "enum": [
                      "sick",
                      "vacation",
                      "personal",
                      "emergency",
                      "other"
                    ]
                  },
                  "reason": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Leave record updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Leave record not found"
          }
        }
      },
      "delete": {
        "summary": "Delete a leave/unavailability record",
        "tags": [
          "Doctors"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "unavailabilityId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Unavailability record ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Leave record deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Leave record not found"
          }
        }
      }
    },
    "/api/files/{id}/download": {
      "get": {
        "summary": "Download a file by ID (forces browser download)",
        "tags": [
          "Files"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "File ID"
          }
        ],
        "responses": {
          "200": {
            "description": "File downloaded successfully",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "File not found"
          }
        }
      }
    },
    "/api/files/{id}": {
      "get": {
        "summary": "Get file by ID",
        "tags": [
          "Files"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "File retrieved successfully"
          },
          "404": {
            "description": "File not found"
          }
        }
      },
      "delete": {
        "summary": "Delete a file",
        "tags": [
          "Files"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "File deleted successfully"
          },
          "404": {
            "description": "File not found"
          }
        }
      }
    },
    "/api/files/upload": {
      "post": {
        "summary": "Upload a file",
        "tags": [
          "Files"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "folder": {
                    "type": "string"
                  },
                  "bucket": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "File uploaded successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/assignment-usage": {
      "get": {
        "summary": "Get hospital assignment usage for current month",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignment usage data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "used": {
                          "type": "number"
                        },
                        "limit": {
                          "type": "number"
                        },
                        "percentage": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "ok",
                            "warning",
                            "critical",
                            "reached"
                          ]
                        },
                        "resetDate": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "remaining": {
                          "type": "number"
                        },
                        "plan": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Hospital not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/hospitals/{id}/assignments": {
      "get": {
        "summary": "Get all assignments for a hospital",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "accepted",
                "declined",
                "completed",
                "cancelled"
              ]
            },
            "description": "Filter by assignment status"
          },
          {
            "in": "query",
            "name": "priority",
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent",
                "emergency"
              ]
            },
            "description": "Filter by priority"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/dashboard": {
      "get": {
        "summary": "Get hospital dashboard metrics and data",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "metrics": {
                          "type": "object"
                        },
                        "todaysSchedule": {
                          "type": "array"
                        },
                        "recentAssignments": {
                          "type": "array"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/hospitals/{id}/departments/{departmentId}": {
      "patch": {
        "summary": "Update a department (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "path",
            "name": "departmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Department ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Department updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "delete": {
        "summary": "Delete a department (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "path",
            "name": "departmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Department ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Department deleted successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/departments": {
      "get": {
        "summary": "Get all departments for a hospital",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Departments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add a department to a hospital (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Department added successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/documents/{documentId}": {
      "delete": {
        "summary": "Delete a hospital document (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "path",
            "name": "documentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Document ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Document deleted successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/documents": {
      "get": {
        "summary": "Get all documents for a hospital",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Documents retrieved successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "post": {
        "summary": "Upload a document for a hospital (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "documentType": {
                    "type": "string",
                    "enum": [
                      "license",
                      "accreditation",
                      "insurance",
                      "other"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/documents/upload": {
      "post": {
        "summary": "Upload document file and create document record in one call",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file",
                  "documentType"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "documentType": {
                    "type": "string",
                    "enum": [
                      "license",
                      "accreditation",
                      "insurance",
                      "other"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded and created successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/hospitals/{id}/favorite-doctors/{doctorId}": {
      "delete": {
        "summary": "Remove a doctor from hospital's favorites",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          },
          {
            "in": "path",
            "name": "doctorId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Doctor ID to remove from favorites"
          }
        ],
        "responses": {
          "200": {
            "description": "Favorite doctor removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Favorite doctor removed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/hospitals/{id}/favorite-doctors": {
      "get": {
        "summary": "Get hospital's favorite doctors",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "List of favorite doctors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "summary": "Add a doctor to hospital's favorites",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "doctorId"
                ],
                "properties": {
                  "doctorId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Doctor ID to add to favorites",
                    "example": "123e4567-e89b-12d3-a456-426614174000"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Favorite doctor added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Favorite doctor added successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/hospitals/{id}/find-doctors": {
      "get": {
        "summary": "Find available doctors for a hospital within a radius",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search by doctor name or specialty"
          },
          {
            "in": "query",
            "name": "specialtyId",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Specialty ID (can be specified multiple times)"
          },
          {
            "in": "query",
            "name": "date",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Appointment date (YYYY-MM-DD)"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Page number"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Number of doctors per page"
          },
          {
            "in": "query",
            "name": "radius",
            "schema": {
              "type": "number",
              "format": "float",
              "default": 50,
              "minimum": 1,
              "maximum": 100
            },
            "description": "Search radius in kilometers (defaults to hospital's maxSearchDistanceKm preference, or 50km if not set)"
          }
        ],
        "responses": {
          "200": {
            "description": "List of available doctors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "doctors": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        },
                        "hospitalSubscription": {
                          "type": "string",
                          "enum": [
                            "free",
                            "basic",
                            "premium",
                            "enterprise"
                          ]
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "integer"
                            },
                            "limit": {
                              "type": "integer"
                            },
                            "total": {
                              "type": "integer"
                            },
                            "totalPages": {
                              "type": "integer"
                            },
                            "hasNextPage": {
                              "type": "boolean"
                            },
                            "hasPrevPage": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/hospitals/{id}/logo/upload": {
      "post": {
        "summary": "Upload hospital logo and update hospital profile in one call",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logo uploaded and updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/hospitals/{id}/patients": {
      "get": {
        "summary": "Get all patients for a hospital",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search term for patient name, condition, or specialty"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "assigned",
                "unassigned",
                "declined",
                "pending",
                "completed"
              ]
            },
            "description": "Filter by assignment status"
          }
        ],
        "responses": {
          "200": {
            "description": "List of patients retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new patient for a hospital",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "fullName",
                  "dateOfBirth",
                  "gender"
                ],
                "properties": {
                  "fullName": {
                    "type": "string"
                  },
                  "dateOfBirth": {
                    "type": "string",
                    "format": "date"
                  },
                  "gender": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "emergencyContact": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "condition": {
                    "type": "string"
                  },
                  "roomType": {
                    "type": "string"
                  },
                  "costPerDay": {
                    "type": "number"
                  },
                  "medicalNotes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Patient created successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "403": {
            "description": "Patient limit reached"
          }
        }
      }
    },
    "/api/hospitals/{id}": {
      "get": {
        "summary": "Get hospital by ID",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Hospital details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Hospital not found"
          }
        }
      },
      "patch": {
        "summary": "Update hospital by ID",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "hospitalType": {
                    "type": "string"
                  },
                  "registrationNumber": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "website": {
                    "type": "string"
                  },
                  "numberOfBeds": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Hospital updated successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "404": {
            "description": "Hospital not found"
          }
        }
      },
      "delete": {
        "summary": "Delete hospital by ID (Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Hospital deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/hospitals/{id}/staff/{staffId}": {
      "patch": {
        "summary": "Update a staff member (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "path",
            "name": "staffId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Staff member ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Staff member updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "delete": {
        "summary": "Delete a staff member (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          },
          {
            "in": "path",
            "name": "staffId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Staff member ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Staff member deleted successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/staff": {
      "get": {
        "summary": "Get all staff members for a hospital",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Staff list retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add a staff member to a hospital (Hospital/Admin only)",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Staff member added successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/hospitals/{id}/stats": {
      "get": {
        "summary": "Get statistics for a specific hospital",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Hospital statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      }
    },
    "/api/hospitals/{id}/usage": {
      "get": {
        "summary": "Get usage statistics for a hospital",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Hospital ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Usage statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "patients": {
                          "type": "object"
                        },
                        "assignments": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/hospitals/profile": {
      "get": {
        "summary": "Get current hospital profile with subscription plan details",
        "tags": [
          "Hospitals"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Hospital profile retrieved successfully with current plan details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "description": "Hospital profile data"
                    },
                    "currentPlan": {
                      "type": "object",
                      "nullable": true,
                      "description": "Current active subscription plan details",
                      "properties": {
                        "subscription": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "startDate": {
                              "type": "string"
                            },
                            "endDate": {
                              "type": "string"
                            },
                            "autoRenew": {
                              "type": "boolean"
                            },
                            "billingCycle": {
                              "type": "string"
                            }
                          }
                        },
                        "plan": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "tier": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string"
                            },
                            "hospitalFeatures": {
                              "type": "object",
                              "nullable": true
                            }
                          }
                        },
                        "pricing": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "billingCycle": {
                              "type": "string"
                            },
                            "billingPeriodMonths": {
                              "type": "number"
                            },
                            "price": {
                              "type": "number"
                            },
                            "currency": {
                              "type": "string"
                            },
                            "setupFee": {
                              "type": "number"
                            },
                            "discountPercentage": {
                              "type": "number"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Hospital profile not found"
          }
        }
      }
    },
    "/api/hospitals/register": {
      "post": {
        "summary": "Complete hospital registration in a single API call",
        "description": "Creates user account, hospital profile, and hospital departments in one atomic transaction",
        "tags": [
          "Hospitals"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "phone",
                  "name",
                  "registrationNumber",
                  "address",
                  "city",
                  "departments"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "hospital@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "example": "SecurePassword123!"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1234567890"
                  },
                  "name": {
                    "type": "string",
                    "example": "City General Hospital"
                  },
                  "registrationNumber": {
                    "type": "string",
                    "example": "HOSP-12345"
                  },
                  "address": {
                    "type": "string",
                    "example": "123 Main Street"
                  },
                  "city": {
                    "type": "string",
                    "example": "New York"
                  },
                  "fullAddress": {
                    "type": "string",
                    "description": "Optional. Full address with building/area name for better geocoding accuracy",
                    "example": "123 Main Street, Building Name, Area"
                  },
                  "state": {
                    "type": "string",
                    "description": "Optional. State/province name",
                    "example": "Maharashtra"
                  },
                  "pincode": {
                    "type": "string",
                    "description": "Optional. Postal/ZIP code",
                    "example": "400001"
                  },
                  "latitude": {
                    "type": "number",
                    "format": "float",
                    "description": "Optional. Latitude coordinate. If not provided, will be calculated via geocoding from address fields",
                    "example": 19.076
                  },
                  "longitude": {
                    "type": "number",
                    "format": "float",
                    "description": "Optional. Longitude coordinate. If not provided, will be calculated via geocoding from address fields",
                    "example": 72.8777
                  },
                  "hospitalType": {
                    "type": "string",
                    "enum": [
                      "general",
                      "specialty",
                      "clinic",
                      "trauma_center",
                      "teaching",
                      "other"
                    ]
                  },
                  "numberOfBeds": {
                    "type": "integer",
                    "minimum": 0,
                    "example": 100
                  },
                  "contactEmail": {
                    "type": "string",
                    "format": "email"
                  },
                  "contactPhone": {
                    "type": "string"
                  },
                  "websiteUrl": {
                    "type": "string"
                  },
                  "departments": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "specialtyId"
                      ],
                      "properties": {
                        "specialtyId": {
                          "type": "string",
                          "format": "uuid"
                        }
                      }
                    }
                  },
                  "device": {
                    "type": "object",
                    "properties": {
                      "device_token": {
                        "type": "string"
                      },
                      "device_type": {
                        "type": "string",
                        "enum": [
                          "ios",
                          "android",
                          "web"
                        ]
                      },
                      "app_version": {
                        "type": "string"
                      },
                      "os_version": {
                        "type": "string"
                      },
                      "is_active": {
                        "type": "boolean"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Hospital registered successfully"
          },
          "400": {
            "description": "Bad request - validation error or duplicate email/registration number"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/hospitals": {
      "get": {
        "summary": "Get all hospitals",
        "tags": [
          "Hospitals"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of hospitals"
          }
        }
      },
      "post": {
        "summary": "Create a new hospital",
        "tags": [
          "Hospitals"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "phone",
                  "password",
                  "name",
                  "registrationNumber",
                  "address",
                  "city"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "registrationNumber": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Hospital created successfully"
          }
        }
      }
    },
    "/api/notifications/{id}": {
      "get": {
        "summary": "Get a specific notification by ID",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Notification ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Notification retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Notification not found"
          }
        }
      },
      "patch": {
        "summary": "Update notification (mark as read/unread)",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Notification ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "isRead": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Notification updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/notifications/preferences": {
      "get": {
        "summary": "Get notification preferences for authenticated user",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Notification preferences retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "patch": {
        "summary": "Update notification preferences for authenticated user",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "boolean"
                  },
                  "push": {
                    "type": "boolean"
                  },
                  "sms": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Preferences updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/notifications": {
      "get": {
        "summary": "Get user notifications",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "userId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "channel",
            "schema": {
              "type": "string",
              "enum": [
                "push",
                "email",
                "sms",
                "in_app"
              ]
            }
          },
          {
            "in": "query",
            "name": "isRead",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of notifications"
          }
        }
      },
      "post": {
        "summary": "Create a new notification (Admin only)",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "notificationType",
                  "title",
                  "message",
                  "channel"
                ],
                "properties": {
                  "userId": {
                    "type": "string"
                  },
                  "notificationType": {
                    "type": "string",
                    "enum": [
                      "booking",
                      "payment",
                      "reminder",
                      "system",
                      "review"
                    ]
                  },
                  "title": {
                    "type": "string"
                  },
                  "message": {
                    "type": "string"
                  },
                  "channel": {
                    "type": "string",
                    "enum": [
                      "push",
                      "email",
                      "sms",
                      "in_app"
                    ]
                  },
                  "relatedId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Notification created successfully"
          }
        }
      }
    },
    "/api/payments/{id}": {
      "get": {
        "summary": "Get payment by ID",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Payment ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Payment details"
          },
          "404": {
            "description": "Payment not found"
          }
        }
      },
      "patch": {
        "summary": "Update payment by ID (Admin only)",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Payment ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "completed",
                      "failed",
                      "refunded"
                    ]
                  },
                  "amount": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment updated successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete payment by ID (Admin only)",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Payment ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Payment deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/payments/create-order": {
      "post": {
        "summary": "Create a payment order for subscription",
        "description": "Creates a database order first, then creates a payment gateway order (Razorpay). Returns checkout data for frontend to initiate payment.",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "planId",
                  "pricingId",
                  "gateway"
                ],
                "properties": {
                  "planId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The subscription plan ID",
                    "example": "123e4567-e89b-12d3-a456-426614174000"
                  },
                  "pricingId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "The pricing option ID (monthly, yearly, etc.)",
                    "example": "123e4567-e89b-12d3-a456-426614174001"
                  },
                  "gateway": {
                    "type": "string",
                    "enum": [
                      "razorpay",
                      "stripe"
                    ],
                    "description": "Payment gateway to use",
                    "example": "razorpay"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "session": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "Payment gateway order ID",
                              "example": "order_ABC123xyz"
                            },
                            "gateway": {
                              "type": "string",
                              "example": "razorpay"
                            },
                            "checkoutData": {
                              "type": "object",
                              "properties": {
                                "orderId": {
                                  "type": "string",
                                  "description": "Razorpay order ID",
                                  "example": "order_ABC123xyz"
                                },
                                "planId": {
                                  "type": "string",
                                  "example": "123e4567-e89b-12d3-a456-426614174000"
                                },
                                "userRole": {
                                  "type": "string",
                                  "example": "doctor"
                                },
                                "email": {
                                  "type": "string",
                                  "example": "user@example.com"
                                }
                              }
                            }
                          }
                        },
                        "orderId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Database order ID",
                          "example": "123e4567-e89b-12d3-a456-426614174002"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "paid",
                            "failed",
                            "expired",
                            "refunded"
                          ],
                          "example": "pending"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "planId, pricingId, and gateway are required"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - user not authenticated"
          },
          "404": {
            "description": "Plan or pricing not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/payments": {
      "get": {
        "summary": "Get all payments",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "userId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "completed",
                "failed",
                "refunded"
              ]
            }
          },
          {
            "in": "query",
            "name": "paymentType",
            "schema": {
              "type": "string",
              "enum": [
                "subscription",
                "booking",
                "commission"
              ]
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payments"
          }
        }
      },
      "post": {
        "summary": "Create a new payment",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "paymentType",
                  "amount"
                ],
                "properties": {
                  "userId": {
                    "type": "string"
                  },
                  "subscriptionId": {
                    "type": "string"
                  },
                  "bookingId": {
                    "type": "string"
                  },
                  "paymentType": {
                    "type": "string",
                    "enum": [
                      "subscription",
                      "booking",
                      "commission"
                    ]
                  },
                  "amount": {
                    "type": "number"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "completed",
                      "failed",
                      "refunded"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Payment created successfully"
          }
        }
      }
    },
    "/api/payments/verify": {
      "post": {
        "summary": "Verify payment after successful transaction",
        "description": "Verifies Razorpay payment signature, updates order status, creates payment transaction record, and creates subscription if payment is successful. Also handles upgrades and billing cycle changes automatically.",
        "tags": [
          "Payments"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "razorpay_order_id",
                  "razorpay_payment_id",
                  "razorpay_signature"
                ],
                "properties": {
                  "razorpay_order_id": {
                    "type": "string",
                    "description": "Razorpay order ID returned from payment gateway",
                    "example": "order_ABC123xyz"
                  },
                  "razorpay_payment_id": {
                    "type": "string",
                    "description": "Razorpay payment ID returned from payment gateway",
                    "example": "pay_XYZ789abc"
                  },
                  "razorpay_signature": {
                    "type": "string",
                    "description": "Payment signature for verification",
                    "example": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment verified and processed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Payment verified and processed successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "orderId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Database order ID",
                          "example": "123e4567-e89b-12d3-a456-426614174002"
                        },
                        "paymentTransactionId": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Payment transaction record ID",
                          "example": "123e4567-e89b-12d3-a456-426614174003"
                        },
                        "subscriptionId": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true,
                          "description": "Subscription ID if created",
                          "example": "123e4567-e89b-12d3-a456-426614174004"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "success",
                            "pending",
                            "failed",
                            "refunded"
                          ],
                          "example": "success"
                        },
                        "razorpayPaymentId": {
                          "type": "string",
                          "example": "pay_XYZ789abc"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing payment details or invalid signature",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Missing payment details or invalid payment signature"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Associated order not found in database"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/reviews/{id}": {
      "get": {
        "summary": "Get review/rating by ID",
        "tags": [
          "Reviews"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Review/Rating ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Review details"
          },
          "404": {
            "description": "Review not found"
          }
        }
      },
      "patch": {
        "summary": "Update review/rating by ID (Admin only)",
        "tags": [
          "Reviews"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Review/Rating ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "rating": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 5
                  },
                  "comment": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Review updated successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete review/rating by ID (Admin only)",
        "tags": [
          "Reviews"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Review/Rating ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Review deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/reviews": {
      "get": {
        "summary": "Get all reviews",
        "tags": [
          "Reviews"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "bookingId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "reviewerId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "revieweeId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "minRating",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5
            }
          },
          {
            "in": "query",
            "name": "maxRating",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 5
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of reviews"
          }
        }
      },
      "post": {
        "summary": "Create a new review",
        "tags": [
          "Reviews"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "bookingId",
                  "reviewerId",
                  "revieweeId",
                  "rating"
                ],
                "properties": {
                  "bookingId": {
                    "type": "string"
                  },
                  "reviewerId": {
                    "type": "string"
                  },
                  "revieweeId": {
                    "type": "string"
                  },
                  "rating": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5
                  },
                  "reviewText": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Review created successfully"
          }
        }
      }
    },
    "/api/specialties/{id}": {
      "get": {
        "summary": "Get specialty by ID",
        "tags": [
          "Specialties"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Specialty ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty details"
          },
          "404": {
            "description": "Specialty not found"
          }
        }
      },
      "patch": {
        "summary": "Update specialty by ID (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Specialty ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Specialty updated successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      },
      "delete": {
        "summary": "Delete specialty by ID (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Specialty ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty deleted successfully"
          },
          "403": {
            "description": "Insufficient permissions"
          }
        }
      }
    },
    "/api/specialties/{id}/stats": {
      "get": {
        "summary": "Get statistics for a specific specialty",
        "tags": [
          "Specialties"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Specialty ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Specialty not found"
          }
        }
      }
    },
    "/api/specialties/{id}/toggle-status": {
      "patch": {
        "summary": "Toggle specialty active/inactive status (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Specialty ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty status toggled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/specialties/{id}/usage": {
      "get": {
        "summary": "Get usage information for a specialty (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Specialty ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty usage information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Specialty not found"
          }
        }
      }
    },
    "/api/specialties/active": {
      "get": {
        "summary": "Get all active specialties",
        "tags": [
          "Specialties"
        ],
        "responses": {
          "200": {
            "description": "List of active specialties",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/specialties/bulk": {
      "post": {
        "summary": "Create multiple specialties in bulk (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "specialties": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Specialties created successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/specialties": {
      "get": {
        "summary": "Get all specialties",
        "tags": [
          "Specialties"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of specialties"
          }
        }
      },
      "post": {
        "summary": "Create a new specialty (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "isActive": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Specialty created successfully"
          }
        }
      }
    },
    "/api/specialties/search/{name}": {
      "get": {
        "summary": "Search for a specialty by name",
        "tags": [
          "Specialties"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Specialty name to search for"
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Specialty not found"
          }
        }
      }
    },
    "/api/specialties/stats": {
      "get": {
        "summary": "Get statistics for all specialties (Admin only)",
        "tags": [
          "Specialties"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Specialty statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/subscriptions/{id}": {
      "get": {
        "summary": "Get a specific subscription by ID",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Subscription ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Subscription not found"
          }
        }
      },
      "patch": {
        "summary": "Update a subscription (cancel, renew, etc.)",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Subscription ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "autoRenew": {
                    "type": "boolean"
                  },
                  "cancellationReason": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Subscription updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/subscriptions/current": {
      "get": {
        "summary": "Get current active subscription for authenticated user",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Active subscription retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No active subscription found"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/subscriptions/history": {
      "get": {
        "summary": "Get subscription history for authenticated user",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Page number"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "pagination": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/subscriptions/plans/{id}": {
      "get": {
        "summary": "Get a specific subscription plan by ID",
        "tags": [
          "Subscriptions"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Plan ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "404": {
            "description": "Plan not found"
          }
        }
      },
      "patch": {
        "summary": "Update a subscription plan (Admin only)",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Plan ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "delete": {
        "summary": "Delete a subscription plan (Admin only)",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Plan ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Plan deleted successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/subscriptions/plans": {
      "get": {
        "summary": "Get all available subscription plans",
        "tags": [
          "Subscriptions"
        ],
        "responses": {
          "200": {
            "description": "List of subscription plans",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new subscription plan (Admin only)",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "tier": {
                    "type": "string"
                  },
                  "userRole": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Plan created successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/subscriptions": {
      "get": {
        "summary": "Get all subscriptions",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "userId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "planId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "expired",
                "cancelled",
                "pending"
              ]
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of subscriptions"
          }
        }
      },
      "post": {
        "summary": "Create a new subscription",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "planId",
                  "startDate",
                  "endDate"
                ],
                "properties": {
                  "userId": {
                    "type": "string"
                  },
                  "planId": {
                    "type": "string"
                  },
                  "startDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "endDate": {
                    "type": "string",
                    "format": "date"
                  },
                  "autoRenew": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscription created successfully"
          }
        }
      }
    },
    "/api/support/tickets/{id}/messages": {
      "get": {
        "summary": "Get all messages for a support ticket",
        "tags": [
          "Support"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Ticket ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Messages retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "post": {
        "summary": "Add a message to a support ticket",
        "tags": [
          "Support"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Ticket ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "message"
                ],
                "properties": {
                  "message": {
                    "type": "string"
                  },
                  "isInternal": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message added successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/support/tickets/{id}": {
      "get": {
        "summary": "Get a specific support ticket by ID",
        "tags": [
          "Support"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Ticket ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket not found"
          }
        }
      },
      "patch": {
        "summary": "Update a support ticket",
        "tags": [
          "Support"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Ticket ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "open",
                      "in_progress",
                      "resolved",
                      "closed"
                    ]
                  },
                  "priority": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket updated successfully"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/support/tickets": {
      "get": {
        "summary": "Get all support tickets",
        "tags": [
          "Support"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of support tickets"
          }
        }
      },
      "post": {
        "summary": "Create a new support ticket",
        "tags": [
          "Support"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "subject",
                  "description",
                  "category",
                  "priority"
                ],
                "properties": {
                  "userId": {
                    "type": "string"
                  },
                  "bookingId": {
                    "type": "string"
                  },
                  "subject": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "category": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "medium",
                      "high",
                      "urgent"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Support ticket created successfully"
          }
        }
      }
    },
    "/api/users/{id}": {
      "get": {
        "summary": "Get user by ID (Admin only)",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "User ID"
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "delete": {
        "summary": "Delete user by ID (Admin only)",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "User ID"
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/api/users/device-register": {
      "post": {
        "summary": "Register or update device token for push notifications",
        "description": "Register a new device token or update existing one. Should be called after login and whenever FCM token refreshes.",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "device_token",
                  "device_type"
                ],
                "properties": {
                  "device_token": {
                    "type": "string",
                    "description": "FCM device token from Firebase Cloud Messaging SDK",
                    "example": "dK8xYz123abc..."
                  },
                  "device_type": {
                    "type": "string",
                    "enum": [
                      "ios",
                      "android",
                      "web"
                    ],
                    "description": "Device platform type",
                    "example": "ios"
                  },
                  "app_version": {
                    "type": "string",
                    "description": "App version (optional)",
                    "example": "1.0.0"
                  },
                  "os_version": {
                    "type": "string",
                    "description": "Operating system version (optional)",
                    "example": "17.0"
                  },
                  "device_name": {
                    "type": "string",
                    "description": "Device name/model (optional)",
                    "example": "iPhone 15 Pro"
                  },
                  "is_active": {
                    "type": "boolean",
                    "description": "Whether device is active (default: true)",
                    "example": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Device registered/updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Device registered successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deviceId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "isNewDevice": {
                          "type": "boolean",
                          "description": "Whether this is a new device or existing device was updated"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Invalid device data"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing authentication token"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/users/forgot-password-otp": {
      "post": {
        "summary": "Request password reset OTP",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "If an account with that email exists, a password reset code has been sent."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "email": {
                          "type": "string"
                        },
                        "expiresIn": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/users/forgot-password": {
      "post": {
        "summary": "Request password reset",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset link sent successfully (email exists)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "If an account with that email exists, a password reset link has been sent."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "email": {
                          "type": "string"
                        },
                        "emailExists": {
                          "type": "boolean",
                          "example": true
                        },
                        "expiresIn": {
                          "type": "string",
                          "description": "Token expiration time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Email does not exist or invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Email does not exist in our system. Please check your email address or sign up for a new account."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "email": {
                          "type": "string"
                        },
                        "emailExists": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/users/login": {
      "post": {
        "summary": "User login",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "device"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "doctor@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "SecurePassword123!"
                  },
                  "accountType": {
                    "type": "string",
                    "enum": [
                      "doctor",
                      "hospital",
                      "admin"
                    ],
                    "description": "Optional. Expected account type for validation. If provided, must match user's actual role.",
                    "example": "doctor"
                  },
                  "device": {
                    "type": "object",
                    "required": [
                      "device_token",
                      "device_type"
                    ],
                    "properties": {
                      "device_token": {
                        "type": "string"
                      },
                      "device_type": {
                        "type": "string",
                        "enum": [
                          "ios",
                          "android",
                          "web"
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accessToken": {
                          "type": "string"
                        },
                        "refreshToken": {
                          "type": "string"
                        },
                        "user": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/users/profile": {
      "get": {
        "summary": "Get current user profile",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User profile"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "patch": {
        "summary": "Update user profile",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully"
          }
        }
      }
    },
    "/api/users/provider-signup": {
      "post": {
        "summary": "Register a new hospital/provider",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "phone",
                  "password",
                  "name",
                  "registrationNumber",
                  "address",
                  "city"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "registrationNumber": {
                    "type": "string"
                  },
                  "address": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Hospital created successfully"
          }
        }
      }
    },
    "/api/users/refresh": {
      "post": {
        "summary": "Refresh access token",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refreshToken"
                ],
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully"
          },
          "401": {
            "description": "Invalid refresh token"
          }
        }
      }
    },
    "/api/users/reset-password-otp": {
      "post": {
        "summary": "Reset password using OTP code",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "otpCode",
                  "password"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Password reset token from email link",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  },
                  "otpCode": {
                    "type": "string",
                    "description": "6-digit OTP code received via email",
                    "example": "123456"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "description": "New password (minimum 8 characters)",
                    "example": "NewSecurePassword123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Password has been reset successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request (invalid OTP, expired OTP, or weak password)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid or expired OTP. Please request a new password reset code."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/users/reset-password": {
      "post": {
        "summary": "Reset password using reset token",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "password"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Password reset token received via email",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "description": "New password (minimum 8 characters)",
                    "example": "NewSecurePassword123!"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Password has been reset successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request (invalid token, expired token, or weak password)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Password reset link has expired. Please request a new one."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "summary": "Get all users (Admin only)",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/users/signup": {
      "post": {
        "summary": "Register a new user (doctor)",
        "tags": [
          "Users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "phone",
                  "password",
                  "device"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "doctor@example.com"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1234567890"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "SecurePassword123!"
                  },
                  "device": {
                    "type": "object",
                    "required": [
                      "device_token",
                      "device_type"
                    ],
                    "properties": {
                      "device_token": {
                        "type": "string",
                        "example": "device-token-123"
                      },
                      "device_type": {
                        "type": "string",
                        "enum": [
                          "ios",
                          "android",
                          "web"
                        ],
                        "example": "web"
                      },
                      "app_version": {
                        "type": "string",
                        "example": "1.0.0"
                      },
                      "os_version": {
                        "type": "string",
                        "example": "1.0.0"
                      },
                      "is_active": {
                        "type": "boolean",
                        "example": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User created successfully"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/users/verify-reset-token": {
      "get": {
        "summary": "Verify reset token and send OTP",
        "tags": [
          "Users"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "token",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Password reset token from email link"
          }
        ],
        "responses": {
          "200": {
            "description": "Token verified and OTP sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "OTP sent to your email"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "email": {
                          "type": "string"
                        },
                        "expiresIn": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired token"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    }
  }
}